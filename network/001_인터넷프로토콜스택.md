## 인터넷 프로토콜 스택 (TCP/IP 구조)     

: 스택 형식으로 하나의 계층은 자신의 표지션만 고려하고 하위, 상위 계층을 고려하지 않는다  

  + **스택** : 선입후출 방식의 자료구조   

  + 각 계층은 같은 위치의 계층끼리 소통하는 것만 생각한다

  > 각 계층의 독립성을 보장하는 이유는 

  > 독립성 보장으로 계층마다의 부품들이 변경되었어도 

  > 다른 층에 독립적이라 전체를 바꿔야 할 일들이 줄어들기 때문이다

  > 즉, 비용 절감이다
     
## **IOS 구조**   

1. **응용계층** : 데이터를 주고 받는 주체로 오직 보내는 메세지의 형식만 고려한다.

  + 대표적으로 웹 브라우저 프로토콜인 http가 존재한다.

2. **전송계층** : 송신자와 수신자의 주소를 정하고, 이들을 연결시키며, 전달 오류와 흐름교통을 잡는 역할을 한다

  + 대표적으로 인터넷 프로토콜의 기반이 되는 TCP/UDP가 존재한다

  > 논리적 주소, 송수신 제어

3. **네트워크 계층** : 논리주소를 통해 네트워크 정보를 전달하고, 해당 주소까지 도달하는 경로를 정해주는 역할을 한다 

  + 물리주소 뿐만 아니라 논리 주소도 사용하는 이유는 
  
    물리주소 하나만 사용할 경우 장치가 이동됐을 때 정보 전달 시간이 길어지기 때문에

    공평성을 보장하기 위해 물리 주소와 논리 주소도 같이 사용한다 

  + 대표적으로 인터넷의 기반이 되는 IP가 존재한다

  > 논리적 정보통신 연결통로

4. **링크 계층** : 주변 네트워크 하드웨어 장치로 물리적 주소를 통해 네트워크 정보를 전달하고 전달 오류를 잡는 역할을 한다.   

  + 대표적으로 집에서 여러 인터넷 기기로 정보를 전달시켜주는 **허브**가 있다.

  > 물리적 주소, 송수신 제어

5. **물리 계층** : 네트워크 하드웨어 장치로 물리적으로 네트워크 정보를 전달하는 역할**만**을 가진다
  
  + 대표적으로 케이블선이 있다

  > 물리적 정보통신 연결통로
   
> 스택구조이므로 상단의 계층의 데이터부터 차곡차곡 쓰고, 읽을 때는 하단의 계층부터 차근차근 읽어간다

> 스택구조이므로 먼저 생성되어 송신된 응용계층의 메세지가 마지막에 읽히고, 맨 마지막에 추가되어 생긴 프레임의 헤더가 맨 먼저 읽힌다  

## 네트워크 계층의 데이터 전달 구조  

### 데이터 송신

1. 응용계층에서 메세지와 보낼 주소 정한 데이터를 생성한다 (M)  

2. 전송계층에서 연결상태와 설정을 정한 헤더를 붙인다 (H + M)   

3. 네트워크계층에서 논리주소를 통해 데이터를 전달하고 경로를 지정한다 (H + H + M)   

4. 링크계층에서 물리 주소를 통해 데이터를 전달하고 그 때의 흐름과 오류를 제어한다 (H + H + H + M)

### 데이터 수신

1. 링크계츠에서 물리 주로를 통해 데이터를 전달한다

2. 네트워크계층에서 논리주소를 통해 데이터를 전달하고 경로를 지정한다

3. 전송계층에서 송신자에게 받은 데이터를 수신버퍼에 저장하여 수신버퍼의 혼잡도를 보고 제어하고 이것을 다른 호스트들에게도 전달한다

4. 응용계층에서 메세지를 받고 처리한다.
   
따라서 네트워크 구조에서 데이터들은 상위 계층에서 보낸 데이터에 각 계층의 헤더가 더한 **캡슐화** 구조라는 것을 알 수 있다    
     

### 네트워크 구조 관점에서 블록체인    

+ 블록체인 등장 이전 네트워크 이분화 구조   

  + 응용계층(웹) : 데이터의 정의 및 관리, 데이터 처리 기능   

  + 프로토콜 계층(인터넷) : 데이터 무결성, 데이터 경로, 데이터 송신 방법 정의
    
+ 블록체인 등장 이후 네트워크 이분화 구조

  + 응용계층(Dapp) : 데이터 처리 기능

  + 프로토콜 계층(블록체인) : 데이터 정의 및 관리, 데이터 무결성, 데이터 경로, 데이터 송신 방법 정의  

## 다중화와 역다중화

+ **다중화란** : 데이터가 여러 데이터 송수신 단말장치가 하나의 연결장치를 이용해 전송계층으로 전달되는 것을 말한다.   
  
  소프트웨어 네트워크에서는 호스트 장치의 여러 앱들이 하나의 전송계층과 네트워크 계층을 이용하는 것과 같다

+ **역다중화** : 데이터가 하나의 연결장치에서 여러 데이터 송수신 단말장치로 응용계층으로 전달되는 것을 말한다

  소트프웨어 네트워크에서는 하나의 전송계층이 응용계층의 여러 소켓에 데이터를 전달해주는 것과 같다
